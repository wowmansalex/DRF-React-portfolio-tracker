{"ast":null,"code":"var _jsxFileName = \"/Users/awaumans/Desktop/coding/python/django-react-portfolio-v2/frontend/src/screens/NewTransactionScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { createNewTransaction, fetchLogData, fetchCoins } from '../features/portfolio/portfolioSlice';\nimport axios from 'axios';\nimport { Button, Form, FormGroup, Input, Label } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst NewTransactionForm = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  let navigate = useNavigate();\n  const [formInput, setFormInput] = useState({\n    transaction_type: '',\n    coin: '',\n    amount: '',\n    date_added: '',\n    price: '',\n    portfolio_linked: ''\n  });\n  useEffect(() => {\n    dispatch(fetchCoins());\n    let date = new Date(formInput.date_added).toLocaleDateString('en-GB').replace(/\\//g, '-');\n\n    const fetchCurrentPrice = async () => {\n      let coin_request = '';\n      coin_names.map(coin => {\n        if (formInput.coin === coin[1]) {\n          coin_request = coin[0];\n        }\n      });\n      const response = await axios.get(`https://api.coingecko.com/api/v3/coins/${coin_request}/history?date=${date}`);\n      setFormInput({ ...formInput,\n        price: response.data.market_data.current_price.usd.toFixed(2)\n      });\n      return response.data;\n    };\n\n    fetchCurrentPrice();\n  }, [formInput.coin, formInput.date_added]);\n  const {\n    coin_names\n  } = useSelector(state => state.portfolio.logData);\n\n  const handleChange = event => {\n    console.log(event.target.value);\n\n    if (event.target.id === 'select') {\n      // console.log(event.target.options[event.target.selectedIndex].text);\n      setFormInput(current => {\n        return { ...current,\n          coin: event.target.options[event.target.selectedIndex].text\n        };\n      });\n    } else {\n      setFormInput({ ...formInput,\n        [event.target.name]: event.target.value\n      });\n      console.log(formInput);\n    }\n  };\n\n  const handleSubmit = event => {\n    // prevents the submit button from refreshing the page\n    event.preventDefault();\n    setFormInput(current => {\n      return { ...current,\n        portfolio_linked: portfolio_name\n      };\n    });\n    dispatch(createNewTransaction(formInput));\n    navigate('/');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-md mx-auto row justify-content-center \",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"framework\",\n          children: \"Select a coin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"select\",\n          onChangeCapture: handleChange,\n          children: coin_names && coin_names.map((coin, index) => {\n            return /*#__PURE__*/_jsxDEV(\"option\", {\n              index: index,\n              name: \"coin\",\n              value: formInput.coin,\n              children: coin[1]\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 10\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          for: \"transaction_type\",\n          children: \"Buy or Sell:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          name: \"transaction_type\",\n          value: formInput.transaction_type,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          for: \"amount\",\n          children: \"Amount:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          name: \"amount\",\n          value: formInput.amount,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          for: \"date\",\n          children: \"Date:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"date\",\n          name: \"date_added\",\n          value: formInput.date_added,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          for: \"price\",\n          children: \"Price:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          name: \"price\",\n          value: formInput.price,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        children: \"Add Transaction\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 3\n  }, this);\n};\n\n_s(NewTransactionForm, \"3Xbwo/JbZNYUGiihndqAMJCbqRo=\", false, function () {\n  return [useDispatch, useNavigate, useSelector];\n});\n\n_c = NewTransactionForm;\nexport default NewTransactionForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewTransactionForm\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","useNavigate","createNewTransaction","fetchLogData","fetchCoins","axios","Button","Form","FormGroup","Input","Label","NewTransactionForm","dispatch","navigate","formInput","setFormInput","transaction_type","coin","amount","date_added","price","portfolio_linked","date","Date","toLocaleDateString","replace","fetchCurrentPrice","coin_request","coin_names","map","response","get","data","market_data","current_price","usd","toFixed","state","portfolio","logData","handleChange","event","console","log","target","value","id","current","options","selectedIndex","text","name","handleSubmit","preventDefault","portfolio_name","index"],"sources":["/Users/awaumans/Desktop/coding/python/django-react-portfolio-v2/frontend/src/screens/NewTransactionScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\n\nimport {\n\tcreateNewTransaction,\n\tfetchLogData,\n\tfetchCoins,\n} from '../features/portfolio/portfolioSlice';\n\nimport axios from 'axios';\n\nimport { Button, Form, FormGroup, Input, Label } from 'reactstrap';\n\nconst NewTransactionForm = () => {\n\tconst dispatch = useDispatch();\n\tlet navigate = useNavigate();\n\n\tconst [formInput, setFormInput] = useState({\n\t\ttransaction_type: '',\n\t\tcoin: '',\n\t\tamount: '',\n\t\tdate_added: '',\n\t\tprice: '',\n\t\tportfolio_linked: '',\n\t});\n\n\tuseEffect(() => {\n\t\tdispatch(fetchCoins());\n\t\tlet date = new Date(formInput.date_added)\n\t\t\t.toLocaleDateString('en-GB')\n\t\t\t.replace(/\\//g, '-');\n\n\t\tconst fetchCurrentPrice = async () => {\n\t\t\tlet coin_request = '';\n\n\t\t\tcoin_names.map(coin => {\n\t\t\t\tif (formInput.coin === coin[1]) {\n\t\t\t\t\tcoin_request = coin[0];\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst response = await axios.get(\n\t\t\t\t`https://api.coingecko.com/api/v3/coins/${coin_request}/history?date=${date}`\n\t\t\t);\n\n\t\t\tsetFormInput({\n\t\t\t\t...formInput,\n\t\t\t\tprice: response.data.market_data.current_price.usd.toFixed(2),\n\t\t\t});\n\t\t\treturn response.data;\n\t\t};\n\t\tfetchCurrentPrice();\n\t}, [formInput.coin, formInput.date_added]);\n\n\tconst { coin_names } = useSelector(state => state.portfolio.logData);\n\n\tconst handleChange = event => {\n\t\tconsole.log(event.target.value);\n\t\tif (event.target.id === 'select') {\n\t\t\t// console.log(event.target.options[event.target.selectedIndex].text);\n\t\t\tsetFormInput(current => {\n\t\t\t\treturn {\n\t\t\t\t\t...current,\n\t\t\t\t\tcoin: event.target.options[event.target.selectedIndex].text,\n\t\t\t\t};\n\t\t\t});\n\t\t} else {\n\t\t\tsetFormInput({\n\t\t\t\t...formInput,\n\t\t\t\t[event.target.name]: event.target.value,\n\t\t\t});\n\t\t\tconsole.log(formInput);\n\t\t}\n\t};\n\n\tconst handleSubmit = event => {\n\t\t// prevents the submit button from refreshing the page\n\t\tevent.preventDefault();\n\t\tsetFormInput(current => {\n\t\t\treturn {\n\t\t\t\t...current,\n\t\t\t\tportfolio_linked: portfolio_name,\n\t\t\t};\n\t\t});\n\t\tdispatch(createNewTransaction(formInput));\n\t\tnavigate('/');\n\t};\n\n\treturn (\n\t\t<div className='container-md mx-auto row justify-content-center '>\n\t\t\t<Form onSubmit={handleSubmit}>\n\t\t\t\t<FormGroup>\n\t\t\t\t\t<label for='framework'>Select a coin</label>\n\t\t\t\t\t<select\n\t\t\t\t\t\tid='select'\n\t\t\t\t\t\tonChangeCapture={handleChange}>\n\t\t\t\t\t\t{coin_names &&\n\t\t\t\t\t\t\tcoin_names.map((coin, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\t\t\t\tname='coin'\n\t\t\t\t\t\t\t\t\t\tvalue={formInput.coin}>\n\t\t\t\t\t\t\t\t\t\t{coin[1]}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</select>\n\t\t\t\t</FormGroup>\n\t\t\t\t<FormGroup>\n\t\t\t\t\t<Label for='transaction_type'>Buy or Sell:</Label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='transaction_type'\n\t\t\t\t\t\tvalue={formInput.transaction_type}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t/>\n\t\t\t\t</FormGroup>\n\t\t\t\t<FormGroup>\n\t\t\t\t\t<Label for='amount'>Amount:</Label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='amount'\n\t\t\t\t\t\tvalue={formInput.amount}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t/>\n\t\t\t\t</FormGroup>\n\t\t\t\t<FormGroup>\n\t\t\t\t\t<Label for='date'>Date:</Label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\ttype='date'\n\t\t\t\t\t\tname='date_added'\n\t\t\t\t\t\tvalue={formInput.date_added}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t/>\n\t\t\t\t</FormGroup>\n\t\t\t\t<FormGroup>\n\t\t\t\t\t<Label for='price'>Price:</Label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\tname='price'\n\t\t\t\t\t\tvalue={formInput.price}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t/>\n\t\t\t\t</FormGroup>\n\t\t\t\t<Button>Add Transaction</Button>\n\t\t\t</Form>\n\t\t</div>\n\t);\n};\n\nexport default NewTransactionForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}