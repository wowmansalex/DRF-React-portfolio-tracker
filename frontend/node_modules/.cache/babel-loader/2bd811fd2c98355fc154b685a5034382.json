{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport api from '../../constants/api';\nconst token = localStorage.getItem('UserToken');\nexport const registerUser = createAsyncThunk('user/registerUser', async (_ref, _ref2) => {\n  let {\n    email,\n    password,\n    password2\n  } = _ref;\n  let {\n    rejectWithValue\n  } = _ref2;\n\n  try {\n    await api.post('/api/register/', {\n      email,\n      password,\n      password2\n    });\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nexport const loginUser = createAsyncThunk('user/loginUser', async (_ref3, _ref4) => {\n  let {\n    email,\n    password\n  } = _ref3;\n  let {\n    rejectWithValue\n  } = _ref4;\n\n  try {\n    let res = await api.post('/api/token/', {\n      email,\n      password\n    });\n    let data = res.data;\n    console.log(data);\n    localStorage.setItem('userToken', data.access);\n    return data; // return res;\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nexport const getUserDetails = createAsyncThunk('user/getUserDetails', async (_, _ref5) => {\n  let {\n    getState,\n    rejectWithValue\n  } = _ref5;\n\n  try {\n    console.log(token);\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    const {\n      data\n    } = await api.get('/api/user/', config);\n    return data;\n  } catch (error) {\n    if (error.response && error.response.data.message) {\n      return rejectWithValue(error.response.data.message);\n    } else {\n      return rejectWithValue(error.message);\n    }\n  }\n});\nconst initialState = {\n  loading: false,\n  userInfo: [],\n  userToken: localStorage.getItem('userToken'),\n  error: null,\n  success: false\n};\nexport const authSlice = createSlice({\n  name: 'userSlice',\n  initialState,\n  reducers: {\n    logout: state => {\n      localStorage.removeItem('userToken');\n      state.loading = false;\n      state.userInfo = null;\n      state.userToken = null;\n      state.error = null;\n    }\n  },\n  extraReducers: {\n    [registerUser.pending]: state => {\n      state.loading = true;\n      state.error = null;\n    },\n    [registerUser.fulfilled]: (state, _ref6) => {\n      let {\n        payload\n      } = _ref6;\n      state.loading = false;\n      state.success = true;\n    },\n    [registerUser.rejected]: (state, _ref7) => {\n      let {\n        payload\n      } = _ref7;\n      state.loading = false;\n      state.error = payload;\n    },\n    [loginUser.pending]: state => {\n      state.loading = true;\n      state.error = null;\n    },\n    [loginUser.fulfilled]: (state, _ref8) => {\n      let {\n        payload\n      } = _ref8;\n      state.loading = false;\n      state.userInfo = payload;\n      state.success = true;\n      state.userToken = payload.access;\n    },\n    [loginUser.rejected]: (state, _ref9) => {\n      let {\n        payload\n      } = _ref9;\n      state.loading = false;\n      state.error = payload;\n    },\n    [getUserDetails.pending]: state => {\n      state.loading = true;\n      state.error = null;\n    },\n    [getUserDetails.fulfilled]: (state, _ref10) => {\n      let {\n        payload\n      } = _ref10;\n      state.loading = false;\n      state.userInfo = payload.response;\n    },\n    [getUserDetails.rejected]: (state, _ref11) => {\n      let {\n        payload\n      } = _ref11;\n      state.loading = false;\n      state.error = payload;\n    }\n  }\n});\nexport default authSlice.reducer;\nexport const {\n  logout,\n  setUser\n} = authSlice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","api","token","localStorage","getItem","registerUser","email","password","password2","rejectWithValue","post","error","response","data","message","loginUser","res","console","log","setItem","access","getUserDetails","_","getState","config","headers","Authorization","get","initialState","loading","userInfo","userToken","success","authSlice","name","reducers","logout","state","removeItem","extraReducers","pending","fulfilled","payload","rejected","reducer","setUser","actions"],"sources":["/Users/awaumans/Desktop/coding/python/django-react-portfolio-v2/frontend/src/features/auth/authSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport api from '../../constants/api';\n\nconst token = localStorage.getItem('UserToken');\n\nexport const registerUser = createAsyncThunk(\n\t'user/registerUser',\n\tasync ({ email, password, password2 }, { rejectWithValue }) => {\n\t\ttry {\n\t\t\tawait api.post('/api/register/', {\n\t\t\t\temail,\n\t\t\t\tpassword,\n\t\t\t\tpassword2,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tif (error.response && error.response.data.message) {\n\t\t\t\treturn rejectWithValue(error.response.data.message);\n\t\t\t} else {\n\t\t\t\treturn rejectWithValue(error.message);\n\t\t\t}\n\t\t}\n\t}\n);\n\nexport const loginUser = createAsyncThunk(\n\t'user/loginUser',\n\tasync ({ email, password }, { rejectWithValue }) => {\n\t\ttry {\n\t\t\tlet res = await api.post('/api/token/', { email, password });\n\n\t\t\tlet data = res.data;\n\t\t\tconsole.log(data);\n\t\t\tlocalStorage.setItem('userToken', data.access);\n\t\t\treturn data;\n\n\t\t\t// return res;\n\t\t} catch (error) {\n\t\t\tif (error.response && error.response.data.message) {\n\t\t\t\treturn rejectWithValue(error.response.data.message);\n\t\t\t} else {\n\t\t\t\treturn rejectWithValue(error.message);\n\t\t\t}\n\t\t}\n\t}\n);\n\nexport const getUserDetails = createAsyncThunk(\n\t'user/getUserDetails',\n\tasync (_, { getState, rejectWithValue }) => {\n\t\ttry {\n\t\t\tconsole.log(token);\n\t\t\tconst config = {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t\t},\n\t\t\t};\n\t\t\tconst { data } = await api.get('/api/user/', config);\n\t\t\treturn data;\n\t\t} catch (error) {\n\t\t\tif (error.response && error.response.data.message) {\n\t\t\t\treturn rejectWithValue(error.response.data.message);\n\t\t\t} else {\n\t\t\t\treturn rejectWithValue(error.message);\n\t\t\t}\n\t\t}\n\t}\n);\n\nconst initialState = {\n\tloading: false,\n\tuserInfo: [],\n\tuserToken: localStorage.getItem('userToken'),\n\terror: null,\n\tsuccess: false,\n};\n\nexport const authSlice = createSlice({\n\tname: 'userSlice',\n\tinitialState,\n\treducers: {\n\t\tlogout: state => {\n\t\t\tlocalStorage.removeItem('userToken');\n\t\t\tstate.loading = false;\n\t\t\tstate.userInfo = null;\n\t\t\tstate.userToken = null;\n\t\t\tstate.error = null;\n\t\t},\n\t},\n\textraReducers: {\n\t\t[registerUser.pending]: state => {\n\t\t\tstate.loading = true;\n\t\t\tstate.error = null;\n\t\t},\n\t\t[registerUser.fulfilled]: (state, { payload }) => {\n\t\t\tstate.loading = false;\n\t\t\tstate.success = true;\n\t\t},\n\t\t[registerUser.rejected]: (state, { payload }) => {\n\t\t\tstate.loading = false;\n\t\t\tstate.error = payload;\n\t\t},\n\t\t[loginUser.pending]: state => {\n\t\t\tstate.loading = true;\n\t\t\tstate.error = null;\n\t\t},\n\t\t[loginUser.fulfilled]: (state, { payload }) => {\n\t\t\tstate.loading = false;\n\t\t\tstate.userInfo = payload;\n\t\t\tstate.success = true;\n\t\t\tstate.userToken = payload.access;\n\t\t},\n\t\t[loginUser.rejected]: (state, { payload }) => {\n\t\t\tstate.loading = false;\n\t\t\tstate.error = payload;\n\t\t},\n\t\t[getUserDetails.pending]: state => {\n\t\t\tstate.loading = true;\n\t\t\tstate.error = null;\n\t\t},\n\t\t[getUserDetails.fulfilled]: (state, { payload }) => {\n\t\t\tstate.loading = false;\n\t\t\tstate.userInfo = payload.response;\n\t\t},\n\t\t[getUserDetails.rejected]: (state, { payload }) => {\n\t\t\tstate.loading = false;\n\t\t\tstate.error = payload;\n\t\t},\n\t},\n});\n\nexport default authSlice.reducer;\nexport const { logout, setUser } = authSlice.actions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}